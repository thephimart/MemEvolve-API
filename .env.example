# MemEvolve Environment Configuration
# Copy this file to .env and update the values for your environment
# The .env file is automatically loaded when the application starts

# =============================================================================
# PRIMARY SETUP - Required for API Wrapper Mode
# =============================================================================

# Upstream LLM API (REQUIRED)
# Your OpenAI-compatible LLM service endpoint
# eg. http://localhost:11434/v1 (example for llama.cpp)
MEMEVOLVE_UPSTREAM_BASE_URL=
# API key for the upstream LLM service
# Leave empty for local services like Ollama, llama.cpp
MEMEVOLVE_UPSTREAM_API_KEY=
MEMEVOLVE_UPSTREAM_MODEL=
# Auto-resolve model info for llama.cpp APIs (true/false)
MEMEVOLVE_UPSTREAM_AUTO_RESOLVE_MODELS=
# Timeout for upstream LLM requests (seconds)
MEMEVOLVE_UPSTREAM_TIMEOUT=600

# Embedding API (OPTIONAL - defaults to same as upstream)
# Only set if embeddings run on different endpoint than LLM
# eg. http://localhost:11435/v1 (example for llama.cpp)
MEMEVOLVE_EMBEDDING_BASE_URL=
# API key for the embedding service
# Leave empty for local services
MEMEVOLVE_EMBEDDING_API_KEY=
MEMEVOLVE_EMBEDDING_MODEL=
# Auto-resolve model info for llama.cpp embedding APIs (true/false)
MEMEVOLVE_EMBEDDING_AUTO_RESOLVE_MODELS=
# Timeout for embedding requests (seconds)
MEMEVOLVE_EMBEDDING_TIMEOUT=60
# Embedding context window (maximum tokens per request)
# Leave empty to auto-detect from model metadata (recommended)
# Cannot exceed max value supported by the model
# Default fallback: 512
MEMEVOLVE_EMBEDDING_MAX_TOKENS=
# Embedding dimension (output vector size)
# Leave empty to auto-detect from model metadata (recommended)
# Common values: 768, 1024, 1536
# Cannot exceed max value supported by the model
# Default fallback: 768
MEMEVOLVE_EMBEDDING_DIMENSION=

# Memory LLM API (OPTIONAL - defaults to same as upstream)

# To use a seperate LLM base URL instead of upstream
# Using a lightweight model here can increase overall performance
# Leave empty to use MEMEVOLVE_UPSTREAM_BASE_URL
MEMEVOLVE_LLM_BASE_URL=
MEMEVOLVE_LLM_API_KEY=
MEMEVOLVE_LLM_MODEL=
# Auto-resolve model info for llama.cpp APIs (true/false)
MEMEVOLVE_LLM_AUTO_RESOLVE_MODELS=
# Timeout and retry attempts for LLM requests (seconds)
MEMEVOLVE_LLM_TIMEOUT=120
MEMEVOLVE_LLM_MAX_RETRIES=3

# =============================================================================
# API SERVER CONFIGURATION - How MemEvolve runs as a proxy
# =============================================================================

# API Server Settings
MEMEVOLVE_API_ENABLE=true
# 127.0.0.1 for local only, 0.0.0.0 for external access
MEMEVOLVE_API_HOST=127.0.0.1
# Port for the MemEvolve API server
MEMEVOLVE_API_PORT=11436

# Memory Integration
MEMEVOLVE_API_MEMORY_INTEGRATION=true
MEMEVOLVE_API_MEMORY_RETRIEVAL_LIMIT=5

# =============================================================================
# STORAGE & DATA MANAGEMENT - Where memories are stored
# =============================================================================

# Data Directories (Centralized Configuration)
# These control where MemEvolve stores different types of data
MEMEVOLVE_DATA_DIR=./data       # Persistent data (memories, evolution state, metrics)
MEMEVOLVE_CACHE_DIR=./cache     # Temporary data (can be safely deleted)
MEMEVOLVE_LOGS_DIR=./logs       # All application logs

# Storage Settings
# Storage files are automatically placed in subdirectories of MEMEVOLVE_DATA_DIR
# Storage backend type
# Options: json, vector, graph
# default is json: no dependencies, easy debugging
# vector: efficient similarity search, requires additional setup
# graph: complex relationships, requires additional setup
MEMEVOLVE_STORAGE_BACKEND_TYPE=json
# Index type for vector storage
# Options: flat, ivf, hnsw
# default is flat for simplicity
# ivf and hnsw require additional dependencies and setup
MEMEVOLVE_STORAGE_INDEX_TYPE=flat

# =============================================================================
# ADVANCED SETTINGS - Only modify if you know what you're doing
# =============================================================================

# Turn on Memory Evolution Features (Advanced)
# Enables runtime optimization of memory architectures using genetic algorithms
# WARNING: Increases CPU usage, best for research/long-running deployments
# default is false - safe for production use
# Set to 'true' to enable evolution, then restart the API server
MEMEVOLVE_ENABLE_EVOLUTION=false

# Evolution Algorithm Settings (only used when evolution is enabled)
# These control how the system searches for optimal memory configurations
# All values are validated on startup - invalid values will cause errors
# These are default for initial setup - the evolution system will modify them over time
# These will only beused if there is no sytem state saved from previous runs
MEMEVOLVE_EVOLUTION_POPULATION_SIZE=10        # Number of architectures tested per generation (min: 3, max: 1000)
MEMEVOLVE_EVOLUTION_GENERATIONS=20            # Evolution cycles to run (min: 1, max: 1000)
MEMEVOLVE_EVOLUTION_MUTATION_RATE=0.1         # Parameter mutation probability (0.0-1.0)
MEMEVOLVE_EVOLUTION_CROSSOVER_RATE=0.5        # Parent combination probability (0.0-1.0)
MEMEVOLVE_EVOLUTION_SELECTION_METHOD=pareto   # Selection strategy: 'pareto', 'tournament', 'roulette', 'rank'
MEMEVOLVE_EVOLUTION_TOURNAMENT_SIZE=3         # Tournament size for selection (min: 2, max: population_size)

# Logging & Debugging
MEMEVOLVE_LOG_LEVEL=INFO
MEMEVOLVE_LOGGING_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
MEMEVOLVE_LOGGING_ENABLE_OPERATION_LOG=true
MEMEVOLVE_LOGGING_MAX_LOG_SIZE_MB=1024

# Individual System Logging (all disabled by default)
# All logs are written to subdirectories of MEMEVOLVE_LOGS_DIR
MEMEVOLVE_LOG_API_SERVER_ENABLE=false
MEMEVOLVE_LOG_MIDDLEWARE_ENABLE=false
MEMEVOLVE_LOG_MEMORY_ENABLE=false
MEMEVOLVE_LOG_EXPERIMENT_ENABLE=false

# Project Settings (usually don't change)
MEMEVOLVE_PROJECT_NAME=MemEvolve-API
MEMEVOLVE_PROJECT_ROOT=.

# =============================================================================
# MEMORY SYSTEM BEHAVIOR - How MemEvolve manages and retrieves memories
# =============================================================================

# Retrieval Settings
MEMEVOLVE_DEFAULT_TOP_K=5
MEMEVOLVE_RETRIEVAL_STRATEGY_TYPE=hybrid
MEMEVOLVE_RETRIEVAL_SEMANTIC_WEIGHT=0.7
MEMEVOLVE_RETRIEVAL_KEYWORD_WEIGHT=0.3
MEMEVOLVE_RETRIEVAL_ENABLE_CACHING=true
MEMEVOLVE_RETRIEVAL_CACHE_SIZE=1024

# Memory Management
MEMEVOLVE_MANAGEMENT_ENABLE_AUTO_MANAGEMENT=true
MEMEVOLVE_MANAGEMENT_AUTO_PRUNE_THRESHOLD=1024
MEMEVOLVE_MANAGEMENT_AUTO_CONSOLIDATE_INTERVAL=128
MEMEVOLVE_MANAGEMENT_DEDUPLICATE_THRESHOLD=0.9
MEMEVOLVE_MANAGEMENT_FORGETTING_STRATEGY=lru
MEMEVOLVE_MANAGEMENT_MAX_MEMORY_AGE_DAYS=365

# Memory Encoding
MEMEVOLVE_ENCODER_ENCODING_STRATEGIES=lesson,skill
MEMEVOLVE_ENCODER_ENABLE_ABSTRACTION=true
MEMEVOLVE_ENCODER_ABSTRACTION_THRESHOLD=10
MEMEVOLVE_ENCODER_ENABLE_TOOL_EXTRACTION=true